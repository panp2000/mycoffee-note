# MyCoffee Note Web版 MVP 仕様書

## 5. 機能要件と優先順位仕様書

### 5.1 機能要件リスト（優先度付き）

#### 優先度1（MVP必須機能）:

1. **ユーザー認証システム**
   - メールアドレス/パスワード登録・ログイン
   - Googleログイン連携
   - パスワードリセット機能
   - 基本的なユーザープロフィール管理

2. **レシピ作成・編集**
   - 基本情報（コーヒー名、産地、焙煎度など）入力
   - 抽出方法別パラメータ入力（6種類の抽出方法をサポート）
   - 器具情報の記録
   - 画像添付（任意）
   - バージョニング（基本的な実装）

3. **レシピ閲覧・管理**
   - レシピ一覧表示（ソート機能付き）
   - レシピ詳細表示
   - お気に入り登録・管理
   - 基本的な検索・フィルター機能

4. **評価システム**
   - 基本評価（星評価、好み度）
   - 詳細風味評価（オプション）
   - 評価履歴の時系列表示

5. **データの永続化とアクセス**
   - セキュアなデータストレージ
   - マルチデバイスアクセス（同一アカウントで複数デバイスからのアクセス）
   - 基本的なデータバックアップ/エクスポート機能

#### 優先度2（リソースに余裕があれば実装）:

1. **アナリティクス**
   - 風味プロファイルの視覚化（レーダーチャート等）
   - 簡易統計（平均評価、抽出方法別評価等）

2. **拡張検索・フィルター**
   - 複合条件検索
   - タグベースのフィルタリング
   - カスタム並べ替えオプション

3. **オフライン機能（限定的）**
   - 最近閲覧したレシピのキャッシュ
   - オフライン時の基本機能利用

4. **テーマ設定**
   - ダークモード/ライトモード切替
   - 単位系設定（メートル法/US単位）

#### 優先度3（MVP後の拡張で検討）:

1. **共有機能**
   - レシピの公開/非公開設定
   - 共有リンク生成
   - SNS連携

2. **コミュニティ機能**
   - ユーザー間フォロー
   - タイムライン
   - いいね/コメント

3. **高度な分析機能**
   - トレンド分析
   - パラメータ相関分析
   - カスタムレポート

### 5.2 抽出方法対応一覧

MVPフェーズでサポートする抽出方法と、それぞれの特有パラメータを定義します。

| 抽出方法 | 特有パラメータ | 優先度 |
|---------|--------------|-------|
| **ドリップ** | ドリッパー種類、フィルター種類、蒸らし時間、注湯パターン | 1 |
| **エスプレッソ** | 圧力、抽出時間、バスケットサイズ、プレインフュージョン | 1 |
| **フレンチプレス** | 浸漬時間、かき混ぜ有無、プレス速度 | 1 |
| **エアロプレス** | 浸漬時間、圧力、抽出方向（標準/インバーテッド） | 1 |
| **モカポット** | 火力、抽出完了目安 | 1 |
| **水出し** | 浸漬時間、温度、かき混ぜ頻度 | 1 |
| **サイフォン** | 火力、抽出時間、かき混ぜ有無 | 2 |
| **クレバードリッパー** | 浸漬時間、かき混ぜ有無、抽出速度 | 2 |
| **ケメックス** | 注湯パターン、フィルター種類 | 2 |
| **カリタウェーブ** | ドリッパーサイズ、注湯パターン | 3 |
| **ベトナムフィン** | 予熱有無、抽出速度 | 3 |

### 5.3 ユーザーストーリー

主要ユーザーストーリーを定義し、それぞれの優先度を設定します。

1. **新規ユーザーのオンボーディング**
   - ユーザーとして、簡単に登録・ログインしたい
   - ユーザーとして、アプリの基本的な使い方を理解したい
   - ユーザーとして、最初のレシピを素早く記録したい

2. **レシピ記録**
   - コーヒー愛好家として、抽出時に使用したパラメータを記録したい
   - コーヒー愛好家として、自分の器具情報を保存したい
   - コーヒー愛好家として、複数の抽出方法を使い分けて記録したい

3. **評価と分析**
   - コーヒー愛好家として、抽出したコーヒーの風味を評価したい
   - コーヒー愛好家として、過去のレシピを比較したい
   - コーヒー愛好家として、パラメータと評価の関係を理解したい

4. **レシピ管理**
   - ユーザーとして、自分のレシピを検索・フィルターしたい
   - ユーザーとして、お気に入りのレシピに素早くアクセスしたい
   - ユーザーとして、複数デバイスで同じデータにアクセスしたい

### 5.4 データ分析機能

データ分析機能の段階的な実装計画を以下に示します：

#### MVPフェーズ（限定的実装）:
- 単一レシピの風味プロファイルレーダーチャート
- 基本的な評価履歴の時系列表示

#### 短期（MVP後1-3ヶ月）:
- 抽出方法別の評価比較
- パラメータと評価の相関グラフ（単一パラメータ）
- 基本的な統計情報（平均評価、最高評価レシピなど）

#### 中期（3-6ヶ月）:
- 複数レシピの比較機能
- 産地別・焙煎度別の評価傾向
- 最適パラメータ範囲の推奨

#### 長期（6-12ヶ月）:
- AI支援による抽出改善提案
- コミュニティ平均との比較
- カスタムレポート生成

### 5.5 UI要素と関連機能

ユーザーインターフェースの主要要素と関連する機能を整理します。

#### ホーム画面
- レシピカード一覧表示
- 検索バー
- フィルターチップ
- 抽出方法別フィルター
- 新規レシピ作成ボタン（FAB）
- アカウントアイコン（プロフィール/設定アクセス）

#### レシピ詳細画面
- 基本情報表示
- 抽出パラメータ表示
- 器具情報表示
- 評価情報表示（星評価、風味バランス）
- 編集ボタン
- 評価編集ボタン
- お気に入りトグル

#### レシピ作成/編集画面
- 基本情報入力フォーム
- 抽出方法選択
- 動的パラメータ入力フォーム
- 器具選択/追加
- 画像添付機能
- 保存/キャンセルボタン

#### 評価入力画面
- 星評価入力
- 好み度選択
- 風味バランススライダー
- 風味タグ選択
- メモ入力
- 保存/キャンセルボタン

#### 設定画面
- アカウント設定
- データ管理（バックアップ/リストア）
- アプリ設定（テーマ、単位系）
- ヘルプ/フィードバック
- ログアウト

### 5.6 API/サービス連携

MVPフェーズでの外部サービス連携は以下の通りです。

#### 認証サービス
- Supabase Authentication
- Google OAuth Provider

#### データストレージ
- Supabase PostgreSQL Database
- Supabase Storage (画像保存用)

#### 分析/モニタリング
- Google Analytics (基本的な使用統計)
- エラーログ・クラッシュレポート

#### 将来的な拡張の可能性
- Open Weather API (抽出環境の湿度・気圧データ取得)
- バーコードスキャンAPI (コーヒー豆のパッケージ識別)
- カレンダー連携 (コーヒー抽出スケジュール)