# MyCoffee Note Web版 MVP 仕様書

## 6. 開発・デプロイメント計画仕様書

### 6.1 開発スケジュール（7週間）

#### 週1: 準備期間
- **日1-2**: プロジェクト初期設定
  - Vite + React + TypeScript プロジェクト作成
  - shadcn/ui, TanStack Query, Zustand等の依存関係設定
  - ESLint/Prettier設定
  - プロジェクト構造定義

- **日3-4**: Supabaseセットアップ
  - プロジェクト作成
  - データベーステーブル設計・作成
  - RLSポリシー設定
  - バージョニングトリガーの実装

- **日5-7**: 基本UIコンポーネント
  - shadcn/uiコンポーネントのインストール
  - テーマ設定
  - 共通レイアウトコンポーネント作成

#### 週2-3: 認証と基本データ構造
- **週2前半**: 認証システム実装
  - Supabase認証連携
  - サインアップ/ログインフォーム
  - Googleログイン実装
  - プロフィール基本機能

- **週2後半**: 基本データモデル実装
  - APIサービス層のベース構築
  - レシピ・抽出パラメータモデル
  - TanStack Queryフック作成

- **週3前半**: レシピCRUD基本機能
  - レシピ一覧表示
  - 基本的なフォーム構造
  - データ作成・更新フロー

- **週3後半**: 評価システム基盤
  - 評価モデル実装
  - 星評価コンポーネント
  - 基本評価フォーム

#### 週4-5: コア機能実装
- **週4前半**: 抽出方法別パラメータ
  - 抽出方法セレクター
  - 動的パラメータフォーム
  - 6種類の抽出方法実装

- **週4後半**: 評価システム拡張
  - 詳細風味評価
  - 評価履歴表示
  - 視覚化コンポーネント（基本）

- **週5前半**: 検索・フィルター機能
  - 検索バー実装
  - フィルターコンポーネント
  - ソート機能

- **週5後半**: お気に入り・タグ機能
  - お気に入り機能
  - タグ入力・フィルター
  - ユーザー設定画面

#### 週6: UI/UX最適化
- **日1-3**: モバイルUI最適化
  - レスポンシブ調整
  - タッチインタラクション改善
  - パフォーマンス最適化

- **日4-5**: デスクトップ基本対応
  - 基本的なブレークポイント対応
  - レイアウト調整
  - キーボードナビゲーション

- **日6-7**: アクセシビリティ対応
  - コントラスト確認
  - キーボード操作テスト
  - スクリーンリーダーテスト

#### 週7: テストとデプロイ準備
- **日1-3**: テストとバグ修正
  - ユーザーテスト実施
  - フィードバック収集
  - 主要バグ修正

- **日4-5**: デプロイメント準備
  - 本番環境設定
  - アナリティクス実装
  - エラー監視設定

- **日6-7**: ローンチ準備
  - 最終QAチェック
  - 本番リリース
  - 初期ユーザーサポート

### 6.2 デプロイメント戦略

#### 環境構成
1. **開発環境**: ローカル開発サーバー
2. **ステージング環境**: 本番前の検証用環境
3. **本番環境**: エンドユーザー向け環境

#### デプロイパイプライン
1. **コード管理**:
   - GitHubリポジトリでのバージョン管理
   - ブランチ戦略: feature → develop → main
   - Pull Requestベースの開発フロー

2. **CI/CD**:
   - GitHub Actionsによる自動テスト
   - Vercelとの連携による自動デプロイ
   - Pull Requestごとのプレビュー環境生成

3. **バックエンド連携**:
   - 開発・ステージング・本番用のSupabaseプロジェクト分離
   - 環境変数による接続先切り替え
   - マイグレーションスクリプトの管理

4. **モニタリング**:
   - Vercelアナリティクス
   - エラートラッキング (Sentry)
   - ユーザー行動分析 (Google Analytics)

### 6.3 リリース戦略

#### フェーズ1: クローズドベータ（1-2週間）
- 招待制で10-20名の初期ユーザーに限定アクセス提供
- 主要機能の使用状況とフィードバックを重点的に収集
- 致命的なバグや使い勝手の問題を発見・修正

#### フェーズ2: オープンベータ（2-4週間）
- 制限なしでアクセス可能に
- ユーザー獲得チャネルの実験
- A/Bテストによる初期最適化

#### フェーズ3: 正式リリース
- プロモーション活動の開始
- 機能改善の優先順位付け
- 収益化実験（必要に応じて）

### 6.4 テスト戦略

#### テスト階層
1. **単体テスト**:
   - ユーティリティ関数
   - カスタムフック
   - 重要なビジネスロジック

2. **統合テスト**:
   - 主要データフロー
   - フォーム送信プロセス
   - 認証フロー

3. **E2Eテスト**:
   - クリティカルユーザーフロー
   - ログイン→レシピ作成→評価入力

4. **手動テスト**:
   - デバイス互換性
   - ユーザビリティ
   - エッジケース

#### 品質保証ガイドライン
- クリティカルパスの完全テスト
- リグレッションテストの自動化
- 重要機能のエラー処理テスト

### 6.5 MVPフェーズ後のロードマップ

#### 短期（MVP後1-3ヶ月）
- ユーザーフィードバックに基づく機能改善
- 残りの抽出方法のサポート
- 基本的なデータ分析機能

#### 中期（3-6ヶ月）
- 共有機能の実装
- 高度な検索・フィルター
- より詳細な分析ダッシュボード

#### 長期（6-12ヶ月）
- コミュニティ機能
- ネイティブモバイルアプリ対応
- ハードウェア連携（スマートスケールなど）

### 6.6 リスク管理

#### 潜在的なリスクと対策

| リスク | 影響度 | 可能性 | 対策 |
|-------|--------|--------|------|
| データモデルの設計不備 | 高 | 中 | 早期プロトタイピングとテスト、柔軟な拡張性を持たせた設計 |
| パフォーマンス問題 | 中 | 高 | 定期的なパフォーマンス計測、仮想化リストの活用、最適化の優先度付け |
| 複雑UI実装の遅延 | 中 | 中 | MVP機能の明確な優先順位付け、段階的な実装計画 |
| デバイス互換性問題 | 中 | 中 | 主要デバイスでの定期的なテスト、クロスプラットフォーム対応の徹底 |
| スコープクリープ | 高 | 高 | 明確なMVP定義、追加機能の厳格な評価、バックログ管理 |

#### 問題発生時の対応手順

1. **問題の特定と評価**
   - 問題の明確な定義
   - 影響範囲の評価
   - 優先度の決定

2. **即時対応**
   - 重大な問題は直ちに対応
   - 回避策の検討と実装
   - 必要に応じてロールバック

3. **恒久的解決策**
   - 根本原因の分析
   - 適切な解決策の設計
   - テストと検証

4. **フィードバックと改善**
   - 問題と解決策の文書化
   - プロセス改善の検討
   - 類似問題の予防策実装

### 6.7 開発環境と要件

#### 開発環境
- **OS**: Windows/macOS/Linux（クロスプラットフォーム）
- **Node.js**: v18.0.0以上
- **パッケージマネージャー**: npm 8.0.0以上 または yarn
- **エディタ推奨**: VS Code + 推奨拡張機能セット
- **ブラウザ**: Chrome最新版（開発用）
- **API開発ツール**: Postman/Insomnia

#### 本番環境要件
- **サポートブラウザ**:
  - Chrome/Edge（最新2バージョン）
  - Firefox（最新2バージョン）
  - Safari（最新2バージョン）
  - モバイルSafari iOS 14以上
  - Chrome for Android（最新バージョン）

- **最小画面サイズ**: 320px幅
- **推奨帯域幅**: 3G (1.5 Mbps)以上
- **オフライン対応**: 限定的
- **PWA対応**: ホーム画面インストール可能

### 6.8 初期セットアップ手順

#### 開発環境構築

```bash
# 1. Viteプロジェクトの作成
npm create vite@latest mycoffee-note -- --template react-ts

# 2. プロジェクトディレクトリに移動
cd mycoffee-note

# 3. 依存パッケージのインストール
npm install

# 4. 主要ライブラリのインストール
npm install zustand @tanstack/react-query @tanstack/react-query-devtools @supabase/supabase-js react-hook-form zod @hookform/resolvers

# 5. TanStack Routerのインストール
npm install @tanstack/react-router

# 6. shadcn/uiのセットアップ
npx shadcn-ui@latest init
```

#### Supabaseセットアップ

1. Supabaseアカウント作成: https://supabase.com
2. 新規プロジェクト作成
   - プロジェクト名: `mycoffee-note`
   - リージョン選択
3. SQL Editorを使用して初期テーブル作成
4. RLSポリシーの設定
5. Googleプロバイダーの設定（OAuth連携）

#### Vercelデプロイメント準備

1. Vercelアカウント作成: https://vercel.com
2. GitHubリポジトリ連携
3. 環境変数設定
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
4. デプロイ設定確認
5. 初期デプロイテスト実行